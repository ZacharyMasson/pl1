<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <script> 
      /*
     * Click the map to set a new location for the Street View camera.
     */
    let map;
    let panorama;

    function initMap() {
      let Baggold = { lat: 45.49670, lng: -73.58202 };
      let Bagg = { lat: 45.49656, lng: -73.58180 };
      let Paulold = { lat: 45.51024, lng: -73.55124 };
      let Paul = { lat: 45.50994, lng: -73.55138 };
      let Phillips = { lat: 45.50382, lng: -73.56872 };
      let Nunsold = { lat: 45.49406, lng: -73.57627 };
      let Nuns = { lat: 45.49460, lng: -73.57682 };
      const berkeley = { lat: 37.869085, lng: -122.254775 };
      const center = { lat: 45.502, lng: -73.559 };
      const sv = new google.maps.StreetViewService();

      panorama = new google.maps.StreetViewPanorama(
        document.getElementById("pano")
      );
      // Set up the map.
      map = new google.maps.Map(document.getElementById("map1"), {
        center: center,
        zoom: 10,
        streetViewControl: false,
      });
      // Set the initial Street View camera to the center of the map
      sv.getPanorama({ location: Bagg, radius: 50 }).then(processSVData);
      // Look for a nearby Street View panorama when the map is clicked.
      // getPanorama will return the nearest pano when the given
      // radius is 50 meters or less.
      const Bagg_info =
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h1 id="firstHeading" class="firstHeading">The Bagg House</h1>' +
        '<div id="bodyContent">' +
        '<img src="pics/bagghouse1900-1.png" alt="Bagg House">' +
        "</div>" +
        "</div>";
      const Paul_info =
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h1 id="firstHeading" class="firstHeading">The Bagg House</h1>' +
        '<div id="bodyContent">' +
        '<img src="pics/bagghouse1900-1.png" alt="Bagg House" max-width="45%" height="auto">' +
        "</div>" +
        "</div>";
      const Phillips_info =
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h1 id="firstHeading" class="firstHeading">The Bagg House</h1>' +
        '<div id="bodyContent">' +
        '<img src="pics/bagghouse1900-1.png" alt="Bagg House" max-width="45%" height="auto">' +
        "</div>" +
        "</div>";
      const Nuns_info =
        '<div id="content">' +
        '<div id="siteNotice">' +
        "</div>" +
        '<h1 id="firstHeading" class="firstHeading">The Bagg House</h1>' +
        '<div id="bodyContent">' +
        '<img src="pics/bagghouse1900-1.png" alt="Bagg House" max-width="45%" height="auto">' +
        "</div>" +
        "</div>";
      const infowindow = new google.maps.InfoWindow({
        content: Bagg_info,
        maxWidth: 200,
      });
      const infowindow2 = new google.maps.InfoWindow({
        content: Paul_info,
        maxWidth: 200,
      });
      const infowindow3 = new google.maps.InfoWindow({
        content: Phillips_info,
        maxWidth: 200,
      });
      const infowindow4 = new google.maps.InfoWindow({
        content: Nuns_info,
        maxWidth: 200,
      });
      let Bagg_marker = new google.maps.Marker({
        position: Bagg,
        map,
        title: "The Bagg House",
      });
      let Paul_marker = new google.maps.Marker({
        position: Paul,
        map,
        title: "Rue Saint Paul E",
      });
      let Phillips_marker = new google.maps.Marker({
        position: Phillips,
        map,
        title: "Phillips Square",
      });
      let Nuns_marker = new google.maps.Marker({
        position: Nuns,
        map,
        title: "Grey Nuns",
      });
      Bagg_marker.addListener("click", () => {
        infowindow.open({
          anchor: Bagg_marker,
          map,
          shouldFocus: false,
        });
        sv.getPanorama({ location: Bagg, radius: 10 })
          .then(processSVData)
      });
      Paul_marker.addListener("click", () => {
        infowindow2.open({
          anchor: Paul_marker,
          map,
          shouldFocus: false,
        });
         sv.getPanorama({ location: Paul, radius: 10 })
          .then(processSVData)
      });
      Phillips_marker.addListener("click", () => {
        infowindow3.open({
          anchor: Phillips_marker,
          map,
          shouldFocus: false,
        });
         sv.getPanorama({ location: Phillips, radius: 10 })
          .then(processSVData)
      });
      Nuns_marker.addListener("click", () => {
        infowindow4.open({
          anchor: Nuns_marker,
          map,
          shouldFocus: false,
        });
         sv.getPanorama({ location: Nuns, radius: 10 })
          .then(processSVData)
      });
      //map.addListener("click", (event) => {
        //sv.getPanorama({ location: event.latLng, radius: 50 })
          //.then(processSVData)
          //.catch((e) =>
            //console.error("Street View data not found for this location.")
          //);
      //});
    }

    function processSVData({ data }) {
      const location = data.location;
      const marker = new google.maps.Marker({
        position: location.latLng,
        map,
        title: location.description,
      });
      panorama.setPano(location.pano);
      panorama.setPov({
        heading: 270,
        pitch: 0,
      });
      panorama.setVisible(true);
      marker.addListener("click", () => {
        const markerPanoID = location.pano;

        // Set the Pano to use the passed panoID.
        panorama.setPano(markerPanoID);
        panorama.setPov({
          heading: 270,
          pitch: 0,
        });
        panorama.setVisible(true);
      });
    }

    </script>
    <style>
        #map {
        height: 100%;
        }
        html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        }
        .gm-style img {
          width: 175px;
          height: auto;
          display: block;
          margin-left: auto;
          margin-right: auto;
        }
    </style>
  </head>
  <body>
    <div id="map" style="width: 45%; height: 100%; float: left"></div>
    <div id="pano" style="width: 45%; height: 100%; float: left"></div>
    </script>
    <style>
        #map {
        height: 100%;
        }
        html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        }
        .gm-style img {
          width: 175px;
          height: auto;
          display: block;
          margin-left: auto;
          margin-right: auto;
        }
        .map1{
          height:500px;
          width:550px;
          background-color: gray;
          position: relative;
          float:left;
        }
        .pano{
          height:500px;
          width:550px;
          background-color: gray;
          background-color:red;
          position:relative;
          float:right;
        }
        .container {
          width: 1200px;
          margin-right: auto;
          margin-left: auto;
          height: auto;
        }
    </style>
  </head>
  <body>
     <div class="container">
      <div class="map1"></div>
      <div class="pano"></div>
     </div>


    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCM-WWHYHIKY-do4kquMy9Z4wQaQx51AuE&callback=initMap&v=weekly"
      async
    ></script>
  </body>
</html>
